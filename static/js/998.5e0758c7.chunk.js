/*! For license information please see 998.5e0758c7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksynapse_frontend=self.webpackChunksynapse_frontend||[]).push([[998],{22972:(n,t,e)=>{function r(n,t){const e=btoa(function(n){let t="";for(let e=0;e<n.length;e+=1)t+=String.fromCharCode(n[e]);return t}(n)).replace(/=/g,"");return t?e.replace(/\+/g,"-").replace(/\//g,"_"):e}function o(){return BigInt("115792089210356248762697446949407573530086143415290314195533631308867097853951")}function i(n){let t=n.toString(16);return t=t.length%2===0?t:"0"+t,function(n){if(n.length%2!=0)throw new Error("Hex string length must be multiple of 2");const t=new Uint8Array(n.length/2);for(let e=0;e<n.length;e+=2)t[e/2]=parseInt(n.substring(e,e+2),16);return t}(t)}function c(n,t){return(n&BigInt(1)<<BigInt(t))!==BigInt(0)}function s(n,t){if(t<=BigInt(0))throw new Error("p must be positive");const e=n%t;if(c(t,0)&&c(t,1)){const n=function(n,t,e){if(t===BigInt(0))return BigInt(1);let r=n;const o=t.toString(2);for(let i=1;i<o.length;++i)r=r*r%e,"1"===o[i]&&(r=r*n%e);return r}(e,t+BigInt(1)>>BigInt(2),t);if(n*n%t!==e)throw new Error("could not find a modular square root");return n}throw new Error("unsupported modulus value")}function u(n,t){const e=o();let r=s(((n*n+(e-BigInt(3)))*n+BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"))%e,e);return t!==c(r,0)&&(r=(e-r)%e),r}function a(n){if(33!==n.length)throw new Error("compressed point has wrong length");if(2!==n[0]&&3!==n[0])throw new Error("invalid format");const t=3===n[0],e=(c=n.subarray(1,n.length),BigInt("0x"+function(n){let t="";for(let e=0;e<n.length;e++){const r=n[e].toString(16);t+=r.length>1?r:"0"+r}return t}(c)));var c;const s=o();if(e<BigInt(0)||e>=s)throw new Error("x is out of range");const a=u(e,t);return{kty:"EC",crv:"P-256",x:r(i(e),!0),y:r(i(a),!0),ext:!0}}e.d(t,{S:()=>l});var g=e(45069);function l(n){const{uncompressedPrivateKeyHex:t,compressedPublicKeyHex:e}=n,r=a(h(e));return r.d=function(n){const t=h(n);return(0,g.up)(t.reduce(((n,t)=>n+String.fromCharCode(t)),""))}(t),r}function h(n){if(0===n.length||n.length%2!==0||/[^a-fA-F0-9]/u.test(n))throw new Error("Invalid hex string: ".concat(JSON.stringify(n)));return Uint8Array.from(n.match(/.{2}/g).map((n=>parseInt(n,16))))}},85998:(n,t,e)=>{e.r(t),e.d(t,{signWithApiKey:()=>i});var r=e(22972),o=e(45069);const i=async n=>{const{content:t,publicKey:e,privateKey:i}=n,s=await async function(n){const{uncompressedPrivateKeyHex:t,compressedPublicKeyHex:e}=n,o=(0,r.S)({uncompressedPrivateKeyHex:t,compressedPublicKeyHex:e});return await crypto.subtle.importKey("jwk",o,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"])}({uncompressedPrivateKeyHex:i,compressedPublicKeyHex:e});return await async function(n){const{key:t,content:e}=n,r=await crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},t,(new TextEncoder).encode(e)),i=function(n){if(n.length%2!=0||0==n.length||n.length>132)throw new Error("Invalid IEEE P1363 signature encoding. Length: "+n.length);const t=c(n.subarray(0,n.length/2)),e=c(n.subarray(n.length/2,n.length));let r=0;const o=2+t.length+1+1+e.length;let i;o>=128?(i=new Uint8Array(o+3),i[r++]=48,i[r++]=129,i[r++]=o):(i=new Uint8Array(o+2),i[r++]=48,i[r++]=o);return i[r++]=2,i[r++]=t.length,i.set(t,r),r+=t.length,i[r++]=2,i[r++]=e.length,i.set(e,r),i}(new Uint8Array(r));return(0,o.pD)(i)}({key:s,content:t})};function c(n){let t=0;for(;t<n.length&&0==n[t];)t++;t==n.length&&(t=n.length-1);let e=0;128==(128&n[t])&&(e=1);const r=new Uint8Array(n.length-t+e);return r.set(n.subarray(t),e),r}}}]);
//# sourceMappingURL=998.5e0758c7.chunk.js.map